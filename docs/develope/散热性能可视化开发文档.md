# æ•£çƒ­æ€§èƒ½å¯è§†åŒ– - å¼€å‘æ–‡æ¡£

> **é¡¹ç›®ç¼–å·**: 12  
> **é¡¹ç›®ç›®å½•**: `apps/thermal-visualizer` (Web App) / `apps/thermal-visualizer-desktop` (æ¡Œé¢ç«¯)  
> **ä¼˜å…ˆçº§**: P1ï¼ˆé«˜ä¼˜å…ˆçº§ï¼‰  
> **çŠ¶æ€**: ï¿½ å¼€å‘ä¸­  
> **é¢„è®¡å·¥æœŸ**: 2-3å‘¨  
> **æŠ€æœ¯éš¾åº¦**: â­â­â­â­â˜†

---

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æ•£çƒ­æ€§èƒ½å¯è§†åŒ–æ˜¯ä¸€å¥—åŒ…å« **Web App (PWA)** å’Œ **æ¡Œé¢ç«¯å±•ç¤ºç¨‹åº** çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚Web Appè´Ÿè´£é‡‡é›†çƒ­æˆåƒæ•°æ®ã€è¿›è¡Œæ¸©åº¦æµ‹è¯•åˆ†æï¼›æ¡Œé¢ç«¯è´Ÿè´£æ¥æ”¶ã€å­˜å‚¨å’Œå¯è§†åŒ–å±•ç¤ºçƒ­åŠ›æ•°æ®ï¼Œæ”¯æŒ3Dçƒ­åŠ›å›¾æ¸²æŸ“å’Œå¤šåœºæ™¯å¯¹æ¯”åˆ†æã€‚

### ç³»ç»Ÿæ¶æ„

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      æ— çº¿/æœ‰çº¿ä¼ è¾“      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Web App       â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚    æ¡Œé¢ç«¯ç¨‹åº    â”‚
â”‚  (æ•°æ®é‡‡é›†ç«¯)    â”‚    WebSocket / USB      â”‚   (æ•°æ®å±•ç¤ºç«¯)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                            â”‚
        â–¼                                            â–¼
   çƒ­æˆåƒæ•°æ®é‡‡é›†                              3Dçƒ­åŠ›å›¾å±•ç¤º
   æ¸©åº¦å®æ—¶ç›‘æ§                                å¤šåœºæ™¯å¯¹æ¯”åˆ†æ
   çƒ­ç‚¹åŒºåŸŸæ ‡æ³¨                                å†å²æ•°æ®å­˜å‚¨
```

### æ ¸å¿ƒä»·å€¼

1. **3Dçƒ­åŠ›å›¾å¯è§†åŒ–**: ç›´è§‚å±•ç¤ºè®¾å¤‡æ¸©åº¦åˆ†å¸ƒ
2. **æ¸©åº¦æ•°æ®åˆ†æ**: æ·±åº¦åˆ†ææ•£çƒ­æ€§èƒ½æŒ‡æ ‡
3. **çƒ­æˆåƒæ•°æ®å¯¼å…¥**: æ”¯æŒçº¢å¤–çƒ­æˆåƒä»ªæ•°æ®
4. **å¤šåœºæ™¯æµ‹è¯•å¯¹æ¯”**: ä¸åŒè´Ÿè½½åœºæ™¯ä¸‹çš„æ•£çƒ­å¯¹æ¯”
5. **çƒ­ç‚¹åŒºåŸŸæ ‡æ³¨**: æ ‡è®°è¯†åˆ«é«˜æ¸©å±é™©åŒºåŸŸ
6. **æ¡Œé¢ç«¯å¤§å±å±•ç¤º**: ä¸“ä¸šçº§æ•°æ®å¯è§†åŒ–ä¸å­˜æ¡£

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### Web App

| ç±»åˆ«         | æŠ€æœ¯é€‰å‹              | è¯´æ˜             |
| ------------ | --------------------- | ---------------- |
| **æ¡†æ¶**     | Next.js 14            | Reactå…¨æ ˆæ¡†æ¶    |
| **è¯­è¨€**     | TypeScript            | ç±»å‹å®‰å…¨         |
| **æ ·å¼**     | TailwindCSS           | åŸå­åŒ–CSS        |
| **UIç»„ä»¶**   | shadcn/ui             | ç°ä»£ç»„ä»¶åº“       |
| **3Dæ¸²æŸ“**   | Three.js + React Three Fiber | 3Dçƒ­åŠ›å›¾   |
| **å›¾è¡¨**     | Recharts              | æ¸©åº¦æ›²çº¿å›¾       |
| **PWA**      | next-pwa              | ç¦»çº¿æ”¯æŒ         |
| **å­˜å‚¨**     | IndexedDB (Dexie.js)  | æœ¬åœ°æ•°æ®åº“       |
| **éƒ¨ç½²**     | Vercel                | è¾¹ç¼˜éƒ¨ç½²         |

### æ¡Œé¢ç«¯ç¨‹åº

| ç±»åˆ«         | æŠ€æœ¯é€‰å‹              | è¯´æ˜             |
| ------------ | --------------------- | ---------------- |
| **æ¡†æ¶**     | Electron + React      | è·¨å¹³å°æ¡Œé¢åº”ç”¨   |
| **3Dæ¸²æŸ“**   | Three.js              | é«˜æ€§èƒ½3Då¯è§†åŒ–   |
| **UIåº“**     | TailwindCSS + shadcn  | ç°ä»£UIç»„ä»¶       |
| **å›¾è¡¨**     | Recharts              | æ•°æ®å¯è§†åŒ–       |
| **é€šä¿¡**     | WebSocket             | å®æ—¶æ•°æ®ä¼ è¾“     |
| **æ•°æ®å­˜å‚¨** | SQLite                | æœ¬åœ°æ•°æ®æŒä¹…åŒ–   |

---

## ğŸ¯ åŠŸèƒ½æ¨¡å—

### Web App åŠŸèƒ½

#### 1. æ¸©åº¦æ•°æ®é‡‡é›†

- **è®¾å¤‡æ¸©åº¦ç›‘æ§**: å®æ—¶è·å–è®¾å¤‡æ¸©åº¦
- **çƒ­æˆåƒå¯¼å…¥**: æ”¯æŒFLIRç­‰çº¢å¤–è®¾å¤‡æ•°æ®
- **å›¾ç‰‡çƒ­åŠ›è§£æ**: ä»çƒ­æˆåƒå›¾ç‰‡æå–æ¸©åº¦çŸ©é˜µ
- **æ‰‹åŠ¨æ¸©åº¦è¾“å…¥**: æ”¯æŒæ‰‹åŠ¨å½•å…¥æµ‹é‡æ•°æ®

#### 2. æµ‹è¯•åœºæ™¯ç®¡ç†

- **åœºæ™¯åˆ›å»º**: å¾…æœº/æ¸¸æˆ/è§†é¢‘/å……ç”µç­‰åœºæ™¯
- **åœºæ™¯å‚æ•°è®°å½•**: ç¯å¢ƒæ¸©åº¦ã€è´Ÿè½½ç±»å‹ã€æ—¶é•¿
- **å®šæ—¶æµ‹è¯•**: è‡ªåŠ¨å®šæ—¶é‡‡é›†æ¸©åº¦æ•°æ®
- **åœºæ™¯æ¨¡æ¿**: é¢„è®¾å¸¸ç”¨æµ‹è¯•åœºæ™¯

#### 3. çƒ­åŠ›å›¾é¢„è§ˆ

- **2Dçƒ­åŠ›å›¾**: å¹³é¢æ¸©åº¦åˆ†å¸ƒå›¾
- **ç®€æ˜“3Dé¢„è§ˆ**: è½»é‡çº§3Dçƒ­åŠ›å±•ç¤º
- **çƒ­ç‚¹æ ‡æ³¨**: æ ‡è®°é«˜æ¸©åŒºåŸŸ
- **æ¸©åº¦è‰²é˜¶**: å¯è‡ªå®šä¹‰è‰²é˜¶èŒƒå›´

#### 4. æ•°æ®åŒæ­¥

- **å®æ—¶æ¨é€**: WebSocketæ¨é€åˆ°æ¡Œé¢ç«¯
- **æ‰¹é‡åŒæ­¥**: ä¸€æ¬¡æ€§åŒæ­¥å†å²æ•°æ®
- **å¢é‡åŒæ­¥**: ä»…åŒæ­¥æ–°å¢æ•°æ®
- **è¿æ¥çŠ¶æ€**: æ˜¾ç¤ºæ¡Œé¢ç«¯è¿æ¥çŠ¶æ€

### æ¡Œé¢ç«¯åŠŸèƒ½

#### 1. è®¾å¤‡è¿æ¥

- **å±€åŸŸç½‘å‘ç°**: è‡ªåŠ¨å‘ç°åŒç½‘ç»œè®¾å¤‡
- **USBè¿æ¥**: é€šè¿‡USBç½‘ç»œå…±äº«è¿æ¥
- **å¤šè®¾å¤‡ç®¡ç†**: åŒæ—¶ç®¡ç†å¤šå°æµ‹è¯•è®¾å¤‡
- **è¿æ¥çŠ¶æ€ç›‘æ§**: å®æ—¶æ˜¾ç¤ºè¿æ¥çŠ¶æ€

#### 2. 3Dçƒ­åŠ›å›¾å±•ç¤º

- **å®Œæ•´3Dçƒ­åŠ›å›¾**: é«˜ç²¾åº¦3Dæ¸©åº¦åˆ†å¸ƒ
- **è§†è§’æ§åˆ¶**: æ—‹è½¬/ç¼©æ”¾/å¹³ç§»
- **åŠ¨ç”»æ’­æ”¾**: æ¸©åº¦å˜åŒ–åŠ¨ç”»å›æ”¾
- **æˆªå›¾å¯¼å‡º**: å¯¼å‡º3Dè§†å›¾å›¾ç‰‡

#### 3. æ¸©åº¦æ•°æ®åˆ†æ

- **æ¸©åº¦æ›²çº¿**: å„æµ‹ç‚¹æ¸©åº¦éšæ—¶é—´å˜åŒ–
- **æœ€é«˜/æœ€ä½/å¹³å‡æ¸©åº¦ç»Ÿè®¡**
- **æ¸©å‡é€Ÿç‡åˆ†æ**: å‡æ¸©/é™æ¸©é€Ÿåº¦
- **æ•£çƒ­æ•ˆç‡è¯„ä¼°**: ç»¼åˆæ•£çƒ­èƒ½åŠ›è¯„åˆ†

#### 4. å¤šåœºæ™¯å¯¹æ¯”

- **åœºæ™¯é€‰æ‹©**: é€‰æ‹©å¤šä¸ªåœºæ™¯è¿›è¡Œå¯¹æ¯”
- **å¹¶æ’3Dè§†å›¾**: å¤šä¸ªçƒ­åŠ›å›¾å¹¶æ’å±•ç¤º
- **å·®å¼‚çƒ­åŠ›å›¾**: æ˜¾ç¤ºæ¸©åº¦å·®å¼‚åˆ†å¸ƒ
- **å¯¹æ¯”æŠ¥è¡¨**: ç”Ÿæˆå¯¹æ¯”åˆ†ææŠ¥å‘Š

#### 5. çƒ­ç‚¹åŒºåŸŸåˆ†æ

- **è‡ªåŠ¨çƒ­ç‚¹è¯†åˆ«**: è¯†åˆ«é«˜æ¸©åŒºåŸŸ
- **çƒ­ç‚¹å†å²è¿½è¸ª**: è¿½è¸ªçƒ­ç‚¹æ¸©åº¦å˜åŒ–
- **é¢„è­¦é˜ˆå€¼è®¾ç½®**: è¶…æ¸©é¢„è­¦æç¤º
- **çƒ­ç‚¹åŒºåŸŸæ ‡æ³¨**: æ·»åŠ å¤‡æ³¨è¯´æ˜

#### 6. æ•°æ®å­˜æ¡£

- **æµ‹è¯•è®°å½•ç®¡ç†**: æŒ‰è®¾å¤‡/åœºæ™¯/æ—¥æœŸå½’æ¡£
- **æ•°æ®å¯¼å…¥å¯¼å‡º**: JSON/CSVæ ¼å¼
- **æŠ¥å‘Šç”Ÿæˆ**: PDFåˆ†ææŠ¥å‘Š

---

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

### Web App

```text
apps/thermal-visualizer/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”œâ”€â”€ page.tsx                    # é¦–é¡µ-æ¦‚è§ˆ
â”‚   â”œâ”€â”€ capture/
â”‚   â”‚   â””â”€â”€ page.tsx                # æ•°æ®é‡‡é›†
â”‚   â”œâ”€â”€ import/
â”‚   â”‚   â””â”€â”€ page.tsx                # çƒ­æˆåƒå¯¼å…¥
â”‚   â”œâ”€â”€ scenes/
â”‚   â”‚   â””â”€â”€ page.tsx                # åœºæ™¯ç®¡ç†
â”‚   â”œâ”€â”€ preview/
â”‚   â”‚   â””â”€â”€ page.tsx                # çƒ­åŠ›å›¾é¢„è§ˆ
â”‚   â”œâ”€â”€ sync/
â”‚   â”‚   â””â”€â”€ page.tsx                # æ•°æ®åŒæ­¥
â”‚   â”œâ”€â”€ history/
â”‚   â”‚   â””â”€â”€ page.tsx                # å†å²è®°å½•
â”‚   â””â”€â”€ settings/
â”‚       â””â”€â”€ page.tsx                # è®¾ç½®
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                         # shadcnç»„ä»¶
â”‚   â”œâ”€â”€ thermal/
â”‚   â”‚   â”œâ”€â”€ HeatmapCanvas.tsx       # 2Dçƒ­åŠ›å›¾
â”‚   â”‚   â”œâ”€â”€ HeatmapPreview3D.tsx    # ç®€æ˜“3Dé¢„è§ˆ
â”‚   â”‚   â”œâ”€â”€ TemperatureScale.tsx    # æ¸©åº¦è‰²é˜¶
â”‚   â”‚   â””â”€â”€ HotspotMarker.tsx       # çƒ­ç‚¹æ ‡æ³¨
â”‚   â”œâ”€â”€ capture/
â”‚   â”‚   â”œâ”€â”€ TemperatureInput.tsx    # æ¸©åº¦è¾“å…¥
â”‚   â”‚   â”œâ”€â”€ ImageImporter.tsx       # å›¾ç‰‡å¯¼å…¥
â”‚   â”‚   â””â”€â”€ CaptureProgress.tsx     # é‡‡é›†è¿›åº¦
â”‚   â”œâ”€â”€ scene/
â”‚   â”‚   â”œâ”€â”€ SceneCard.tsx           # åœºæ™¯å¡ç‰‡
â”‚   â”‚   â””â”€â”€ SceneForm.tsx           # åœºæ™¯è¡¨å•
â”‚   â””â”€â”€ sync/
â”‚       â”œâ”€â”€ ConnectionStatus.tsx    # è¿æ¥çŠ¶æ€
â”‚       â””â”€â”€ SyncPanel.tsx           # åŒæ­¥é¢æ¿
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ thermal/
â”‚   â”‚   â”œâ”€â”€ parser.ts               # çƒ­æˆåƒæ•°æ®è§£æ
â”‚   â”‚   â”œâ”€â”€ heatmap.ts              # çƒ­åŠ›å›¾ç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ analysis.ts             # æ¸©åº¦åˆ†æ
â”‚   â”œâ”€â”€ device/
â”‚   â”‚   â””â”€â”€ temperature.ts          # è®¾å¤‡æ¸©åº¦è·å–
â”‚   â”œâ”€â”€ database.ts                 # IndexedDB
â”‚   â””â”€â”€ websocket.ts                # WebSocketå®¢æˆ·ç«¯
â”‚
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useThermalData.ts
â”‚   â”œâ”€â”€ useDeviceTemp.ts
â”‚   â””â”€â”€ useSync.ts
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ manifest.json
â”‚
â”œâ”€â”€ next.config.js
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

### æ¡Œé¢ç«¯

```text
apps/thermal-visualizer-desktop/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ index.ts                # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”‚   â”œâ”€â”€ websocket.ts            # WebSocketæœåŠ¡å™¨
â”‚   â”‚   â”œâ”€â”€ database.ts             # SQLiteæ•°æ®åº“
â”‚   â”‚   â””â”€â”€ discovery.ts            # è®¾å¤‡å‘ç°
â”‚   â”‚
â”‚   â”œâ”€â”€ renderer/
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ Heatmap3D.tsx       # 3Dçƒ­åŠ›å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ TemperatureChart.tsx # æ¸©åº¦æ›²çº¿
â”‚   â”‚   â”‚   â”œâ”€â”€ SceneCompare.tsx    # åœºæ™¯å¯¹æ¯”
â”‚   â”‚   â”‚   â”œâ”€â”€ HotspotPanel.tsx    # çƒ­ç‚¹é¢æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ DeviceList.tsx      # è®¾å¤‡åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ ExportPanel.tsx     # å¯¼å‡ºé¢æ¿
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ Dashboard.tsx       # ä»ªè¡¨ç›˜
â”‚   â”‚   â”‚   â”œâ”€â”€ Viewer3D.tsx        # 3DæŸ¥çœ‹å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Analysis.tsx        # æ•°æ®åˆ†æ
â”‚   â”‚   â”‚   â”œâ”€â”€ Compare.tsx         # åœºæ™¯å¯¹æ¯”
â”‚   â”‚   â”‚   â”œâ”€â”€ Archive.tsx         # æ•°æ®å­˜æ¡£
â”‚   â”‚   â”‚   â””â”€â”€ Settings.tsx        # è®¾ç½®
â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”œâ”€â”€ useThermalStore.ts
â”‚   â”‚   â”‚   â””â”€â”€ use3DControls.ts
â”‚   â”‚   â””â”€â”€ styles/
â”‚   â”‚
â”‚   â””â”€â”€ preload/
â”‚       â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ package.json
â””â”€â”€ electron-builder.json
```

---

## ğŸ“¡ æ•°æ®ä¼ è¾“åè®®

### WebSocketåè®®ï¼ˆæ— çº¿ä¼ è¾“ï¼‰

```typescript
// è¿æ¥: ws://desktop_ip:8768

interface ThermalPacket {
  type: 'thermal_data' | 'sync_history' | 'device_info' | 'scene_data';
  timestamp: number;
  deviceId: string;
  data: ThermalData | HistoryData[] | DeviceInfo | SceneData;
}

interface ThermalData {
  captureId: string;
  captureTime: string;
  sceneId: string;
  sceneName: string;
  resolution: { width: number; height: number };
  temperatureMatrix: number[][];    // æ¸©åº¦çŸ©é˜µ [row][col]
  minTemp: number;
  maxTemp: number;
  avgTemp: number;
  ambientTemp: number;              // ç¯å¢ƒæ¸©åº¦
  hotspots: Hotspot[];
}

interface Hotspot {
  id: string;
  x: number;
  y: number;
  temperature: number;
  label?: string;
}

interface SceneData {
  sceneId: string;
  name: string;
  type: 'idle' | 'gaming' | 'video' | 'charging' | 'benchmark' | 'custom';
  duration: number;                 // æµ‹è¯•æ—¶é•¿(ç§’)
  loadLevel: number;                // è´Ÿè½½ç­‰çº§ 0-100
  description?: string;
}

interface DeviceInfo {
  model: string;
  manufacturer: string;
  os: string;
  osVersion: string;
  totalCaptures: number;
  firstCaptureDate: string;
}
```

### USBä¼ è¾“

```text
é€šè¿‡æœ¬åœ°HTTPæœåŠ¡å™¨å®ç°:
1. æ¡Œé¢ç«¯å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ localhost:8768
2. æ‰‹æœºé€šè¿‡USBç½‘ç»œå…±äº«è¿æ¥ç”µè„‘
3. Web App è¿æ¥ localhost:8768 è¿›è¡Œæ•°æ®ä¼ è¾“
```

---

## ğŸ“‹ å¼€å‘ä»»åŠ¡æ¸…å• (TODO List)

### Web App

#### é¡¹ç›®åˆå§‹åŒ–

- [x] åˆ›å»ºNext.jsé¡¹ç›®
- [x] é…ç½®TypeScript
- [x] é…ç½®TailwindCSS + shadcn/ui
- [ ] é…ç½®PWA (next-pwa)
- [ ] é…ç½®IndexedDB (Dexie.js)
- [ ] é…ç½®Three.js + React Three Fiber
- [ ] é…ç½®Recharts

#### æ¸©åº¦æ•°æ®é‡‡é›†æ¨¡å—

- [x] å®ç°è®¾å¤‡æ¸©åº¦è·å–ï¼ˆBattery/CPUæ¸©åº¦APIï¼‰
- [x] å®ç°çƒ­æˆåƒå›¾ç‰‡è§£æå™¨
- [x] å®ç°æ¸©åº¦çŸ©é˜µæå–ç®—æ³•
- [x] å®ç°æ‰‹åŠ¨æ¸©åº¦è¾“å…¥è¡¨å•
- [x] è®¾è®¡é‡‡é›†è¿›åº¦UI
- [x] è®¾è®¡é‡‡é›†ç»“æœé¢„è§ˆUI

#### æµ‹è¯•åœºæ™¯ç®¡ç†æ¨¡å—

- [x] å®ç°åœºæ™¯CRUDæ“ä½œ
- [x] å®ç°åœºæ™¯æ¨¡æ¿åŠŸèƒ½
- [x] å®ç°å®šæ—¶æµ‹è¯•è°ƒåº¦
- [x] å®ç°åœºæ™¯å‚æ•°è¡¨å•
- [x] è®¾è®¡åœºæ™¯åˆ—è¡¨UI
- [x] è®¾è®¡åœºæ™¯è¯¦æƒ…UI

#### çƒ­åŠ›å›¾é¢„è§ˆæ¨¡å—

- [x] å®ç°2D Canvasçƒ­åŠ›å›¾æ¸²æŸ“
- [x] å®ç°æ¸©åº¦è‰²é˜¶ç»„ä»¶
- [x] å®ç°çƒ­ç‚¹æ ‡æ³¨åŠŸèƒ½
- [x] å®ç°ç®€æ˜“3Dé¢„è§ˆï¼ˆReact Three Fiberï¼‰
- [x] è®¾è®¡çƒ­åŠ›å›¾é¢„è§ˆé¡µé¢

#### æ•°æ®å­˜å‚¨æ¨¡å—

- [x] è®¾è®¡IndexedDB Schema
- [x] å®ç°çƒ­åŠ›æ•°æ®CRUD
- [x] å®ç°åœºæ™¯æ•°æ®CRUD
- [x] å®ç°è®¾å¤‡ä¿¡æ¯å­˜å‚¨
- [x] å®ç°æ•°æ®å¯¼å‡ºåŠŸèƒ½

#### æ•°æ®åŒæ­¥æ¨¡å—

- [x] å®ç°WebSocketå®¢æˆ·ç«¯
- [x] å®ç°æ¡Œé¢ç«¯è‡ªåŠ¨å‘ç°
- [x] å®ç°å®æ—¶æ•°æ®æ¨é€
- [x] å®ç°æ‰¹é‡å†å²åŒæ­¥
- [x] å®ç°å¢é‡åŒæ­¥
- [x] è®¾è®¡è¿æ¥çŠ¶æ€UI
- [x] è®¾è®¡åŒæ­¥é¢æ¿UI

#### UIé¡µé¢å¼€å‘

- [x] é¦–é¡µï¼ˆæ•°æ®æ¦‚è§ˆï¼‰
- [x] æ•°æ®é‡‡é›†é¡µ
- [x] çƒ­æˆåƒå¯¼å…¥é¡µ
- [x] åœºæ™¯ç®¡ç†é¡µ
- [x] çƒ­åŠ›å›¾é¢„è§ˆé¡µ
- [x] æ•°æ®åŒæ­¥é¡µ
- [x] å†å²è®°å½•é¡µ
- [x] è®¾ç½®é¡µ

### æ¡Œé¢ç«¯ç¨‹åº

#### é¡¹ç›®åˆå§‹åŒ–

- [x] åˆ›å»ºElectron + Reacté¡¹ç›®
- [x] é…ç½®TypeScript
- [x] é…ç½®TailwindCSS + shadcn/ui
- [ ] é…ç½®Three.js
- [ ] é…ç½®Recharts
- [ ] é…ç½®SQLite (better-sqlite3)
- [x] é…ç½®electron-builder

#### é€šä¿¡æ¨¡å—

- [x] å®ç°WebSocketæœåŠ¡å™¨
- [x] å®ç°UDPå¹¿æ’­å‘ç°
- [x] å®ç°USBè¿æ¥æ£€æµ‹
- [x] å®ç°å¤šè®¾å¤‡è¿æ¥ç®¡ç†
- [x] å®ç°æ•°æ®æ¥æ”¶å¤„ç†

#### æ•°æ®å­˜å‚¨æ¨¡å—

- [x] è®¾è®¡SQLiteè¡¨ç»“æ„
- [x] å®ç°çƒ­åŠ›æ•°æ®å­˜å‚¨
- [x] å®ç°åœºæ™¯æ•°æ®å­˜å‚¨
- [x] å®ç°è®¾å¤‡æ¡£æ¡ˆå­˜å‚¨
- [x] å®ç°æ•°æ®æŸ¥è¯¢æ¥å£

#### 3Dçƒ­åŠ›å›¾æ¨¡å—

- [x] å®ç°Three.jsçƒ­åŠ›å›¾åœºæ™¯
- [x] å®ç°æ¸©åº¦-é¢œè‰²æ˜ å°„
- [x] å®ç°3Dç½‘æ ¼ç”Ÿæˆ
- [x] å®ç°OrbitControlsäº¤äº’
- [x] å®ç°åŠ¨ç”»æ’­æ”¾åŠŸèƒ½
- [x] å®ç°æˆªå›¾å¯¼å‡ºåŠŸèƒ½

#### æ¸©åº¦åˆ†ææ¨¡å—

- [x] å®ç°æ¸©åº¦ç»Ÿè®¡ç®—æ³•
- [x] å®ç°æ¸©å‡é€Ÿç‡è®¡ç®—
- [x] å®ç°æ•£çƒ­æ•ˆç‡è¯„åˆ†
- [x] å®ç°å¼‚å¸¸æ£€æµ‹ç®—æ³•
- [x] è®¾è®¡æ¸©åº¦æ›²çº¿å›¾è¡¨
- [x] è®¾è®¡åˆ†æç»“æœå¡ç‰‡

#### å¤šåœºæ™¯å¯¹æ¯”æ¨¡å—

- [x] å®ç°åœºæ™¯é€‰æ‹©å™¨
- [x] å®ç°å¹¶æ’3Dè§†å›¾
- [x] å®ç°å·®å¼‚çƒ­åŠ›å›¾
- [x] å®ç°å¯¹æ¯”æ•°æ®è¡¨
- [x] è®¾è®¡å¯¹æ¯”é¡µé¢å¸ƒå±€

#### çƒ­ç‚¹åŒºåŸŸåˆ†ææ¨¡å—

- [x] å®ç°è‡ªåŠ¨çƒ­ç‚¹è¯†åˆ«ç®—æ³•
- [x] å®ç°çƒ­ç‚¹è¿½è¸ªåŠŸèƒ½
- [x] å®ç°é¢„è­¦é˜ˆå€¼è®¾ç½®
- [x] å®ç°çƒ­ç‚¹æ ‡æ³¨ç¼–è¾‘
- [x] è®¾è®¡çƒ­ç‚¹é¢æ¿UI

#### æ•°æ®å­˜æ¡£æ¨¡å—

- [x] å®ç°æŒ‰è®¾å¤‡/åœºæ™¯/æ—¥æœŸç­›é€‰
- [x] å®ç°æ•°æ®å¯¼å…¥åŠŸèƒ½
- [x] å®ç°JSON/CSVå¯¼å‡º
- [x] å®ç°PDFæŠ¥å‘Šç”Ÿæˆ
- [x] è®¾è®¡å­˜æ¡£åˆ—è¡¨UI

#### UIé¡µé¢å¼€å‘

- [x] ä»ªè¡¨ç›˜ï¼ˆè®¾å¤‡æ¦‚è§ˆ+è¿æ¥çŠ¶æ€ï¼‰
- [x] 3DæŸ¥çœ‹å™¨é¡µ
- [x] æ•°æ®åˆ†æé¡µ
- [x] åœºæ™¯å¯¹æ¯”é¡µ
- [x] çƒ­ç‚¹åˆ†æé¡µ
- [x] æ•°æ®å­˜æ¡£é¡µ
- [x] è®¾ç½®é¡µ

### æµ‹è¯•ä¸å‘å¸ƒ

#### æµ‹è¯•

- [ ] Web AppåŠŸèƒ½æµ‹è¯•
- [ ] æ¡Œé¢ç«¯åŠŸèƒ½æµ‹è¯•
- [ ] æ•°æ®ä¼ è¾“ç¨³å®šæ€§æµ‹è¯•
- [ ] PWAç¦»çº¿æµ‹è¯•
- [ ] 3Dæ¸²æŸ“æ€§èƒ½æµ‹è¯•
- [ ] å¤šè®¾å¤‡å¹¶å‘æµ‹è¯•

#### å‘å¸ƒ

- [ ] Verceléƒ¨ç½²Web App
- [ ] æ¡Œé¢ç«¯Windowsæ‰“åŒ…
- [ ] æ¡Œé¢ç«¯macOSæ‰“åŒ…
- [ ] ç¼–å†™ä½¿ç”¨æ–‡æ¡£

---

## ğŸ”‘ æ ¸å¿ƒæŠ€æœ¯å®ç°

### çƒ­æˆåƒå›¾ç‰‡è§£æ

```typescript
class ThermalImageParser {
  // ä»çƒ­æˆåƒå›¾ç‰‡æå–æ¸©åº¦çŸ©é˜µ
  async parseImage(imageFile: File): Promise<ThermalData> {
    const img = await this.loadImage(imageFile);
    const canvas = document.createElement('canvas');
    const ctx = canvas.getContext('2d')!;
    
    canvas.width = img.width;
    canvas.height = img.height;
    ctx.drawImage(img, 0, 0);
    
    const imageData = ctx.getImageData(0, 0, img.width, img.height);
    const matrix = this.colorToTemperature(imageData);
    
    return {
      resolution: { width: img.width, height: img.height },
      temperatureMatrix: matrix,
      minTemp: this.getMinTemp(matrix),
      maxTemp: this.getMaxTemp(matrix),
      avgTemp: this.getAvgTemp(matrix),
    };
  }
  
  // é¢œè‰²åˆ°æ¸©åº¦æ˜ å°„ï¼ˆåŸºäºå¸¸è§çƒ­æˆåƒè‰²é˜¶ï¼‰
  private colorToTemperature(imageData: ImageData): number[][] {
    const { width, height, data } = imageData;
    const matrix: number[][] = [];
    
    for (let y = 0; y < height; y++) {
      const row: number[] = [];
      for (let x = 0; x < width; x++) {
        const idx = (y * width + x) * 4;
        const r = data[idx], g = data[idx + 1], b = data[idx + 2];
        
        // æ ¹æ®é¢œè‰²è®¡ç®—æ¸©åº¦ (å‡è®¾è‰²é˜¶èŒƒå›´20-100Â°C)
        const temp = this.rgbToTemp(r, g, b, 20, 100);
        row.push(temp);
      }
      matrix.push(row);
    }
    
    return matrix;
  }
  
  private rgbToTemp(r: number, g: number, b: number, minT: number, maxT: number): number {
    // åŸºäºHSVçš„çƒ­æˆåƒè‰²é˜¶æ˜ å°„
    const hue = this.rgbToHue(r, g, b);
    // çƒ­æˆåƒé€šå¸¸: è“(240Â°)=å†· -> çº¢(0Â°)=çƒ­
    const normalizedHue = hue > 180 ? (360 - hue) / 360 : (180 - hue) / 180;
    return minT + normalizedHue * (maxT - minT);
  }
}
```

### 3Dçƒ­åŠ›å›¾æ¸²æŸ“ï¼ˆThree.jsï¼‰

```typescript
class Heatmap3DRenderer {
  private scene: THREE.Scene;
  private camera: THREE.PerspectiveCamera;
  private renderer: THREE.WebGLRenderer;
  private mesh: THREE.Mesh;
  
  // ä»æ¸©åº¦çŸ©é˜µåˆ›å»º3Dçƒ­åŠ›å›¾
  createHeatmap(matrix: number[][], colorScale: ColorScale) {
    const rows = matrix.length;
    const cols = matrix[0].length;
    
    // åˆ›å»ºå‡ ä½•ä½“
    const geometry = new THREE.PlaneGeometry(cols, rows, cols - 1, rows - 1);
    const positions = geometry.attributes.position.array as Float32Array;
    const colors = new Float32Array(positions.length);
    
    // è®¾ç½®é¡¶ç‚¹é«˜åº¦å’Œé¢œè‰²
    for (let i = 0; i < rows; i++) {
      for (let j = 0; j < cols; j++) {
        const idx = i * cols + j;
        const temp = matrix[i][j];
        
        // é«˜åº¦æ˜ å°„
        positions[idx * 3 + 2] = (temp - colorScale.min) / (colorScale.max - colorScale.min) * 10;
        
        // é¢œè‰²æ˜ å°„
        const color = this.tempToColor(temp, colorScale);
        colors[idx * 3] = color.r;
        colors[idx * 3 + 1] = color.g;
        colors[idx * 3 + 2] = color.b;
      }
    }
    
    geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));
    
    const material = new THREE.MeshStandardMaterial({
      vertexColors: true,
      side: THREE.DoubleSide,
    });
    
    this.mesh = new THREE.Mesh(geometry, material);
    this.scene.add(this.mesh);
  }
  
  private tempToColor(temp: number, scale: ColorScale): { r: number; g: number; b: number } {
    const ratio = (temp - scale.min) / (scale.max - scale.min);
    
    // å†·åˆ°çƒ­: è“ -> é’ -> ç»¿ -> é»„ -> çº¢
    if (ratio < 0.25) {
      return { r: 0, g: ratio * 4, b: 1 };
    } else if (ratio < 0.5) {
      return { r: 0, g: 1, b: 1 - (ratio - 0.25) * 4 };
    } else if (ratio < 0.75) {
      return { r: (ratio - 0.5) * 4, g: 1, b: 0 };
    } else {
      return { r: 1, g: 1 - (ratio - 0.75) * 4, b: 0 };
    }
  }
}
```

### çƒ­ç‚¹è‡ªåŠ¨è¯†åˆ«

```typescript
class HotspotDetector {
  // è¯†åˆ«æ¸©åº¦çƒ­ç‚¹åŒºåŸŸ
  detectHotspots(matrix: number[][], threshold: number = 0.9): Hotspot[] {
    const maxTemp = this.getMaxTemp(matrix);
    const tempThreshold = maxTemp * threshold;
    const visited = new Set<string>();
    const hotspots: Hotspot[] = [];
    
    for (let y = 0; y < matrix.length; y++) {
      for (let x = 0; x < matrix[0].length; x++) {
        if (matrix[y][x] >= tempThreshold && !visited.has(`${x},${y}`)) {
          const region = this.floodFill(matrix, x, y, tempThreshold, visited);
          if (region.length > 0) {
            const center = this.getRegionCenter(region);
            const maxRegionTemp = Math.max(...region.map(p => matrix[p.y][p.x]));
            
            hotspots.push({
              id: `hotspot_${hotspots.length}`,
              x: center.x,
              y: center.y,
              temperature: maxRegionTemp,
            });
          }
        }
      }
    }
    
    return hotspots;
  }
  
  private floodFill(
    matrix: number[][],
    startX: number,
    startY: number,
    threshold: number,
    visited: Set<string>
  ): { x: number; y: number }[] {
    const region: { x: number; y: number }[] = [];
    const stack = [{ x: startX, y: startY }];
    
    while (stack.length > 0) {
      const { x, y } = stack.pop()!;
      const key = `${x},${y}`;
      
      if (visited.has(key)) continue;
      if (x < 0 || x >= matrix[0].length || y < 0 || y >= matrix.length) continue;
      if (matrix[y][x] < threshold) continue;
      
      visited.add(key);
      region.push({ x, y });
      
      stack.push({ x: x + 1, y }, { x: x - 1, y }, { x, y: y + 1 }, { x, y: y - 1 });
    }
    
    return region;
  }
}
```

### æ•°æ®åŒæ­¥

```typescript
class ThermalSyncClient {
  private ws: WebSocket | null = null;
  
  async connect(serverUrl: string) {
    this.ws = new WebSocket(serverUrl);
    
    this.ws.onclose = () => {
      setTimeout(() => this.connect(serverUrl), 3000);
    };
  }
  
  // åŒæ­¥çƒ­åŠ›æ•°æ®
  sendThermalData(data: ThermalData) {
    this.send({
      type: 'thermal_data',
      timestamp: Date.now(),
      deviceId: this.getDeviceId(),
      data: data
    });
  }
  
  // åŒæ­¥åœºæ™¯æ•°æ®
  sendSceneData(scene: SceneData) {
    this.send({
      type: 'scene_data',
      timestamp: Date.now(),
      deviceId: this.getDeviceId(),
      data: scene
    });
  }
  
  // æ‰¹é‡åŒæ­¥å†å²
  async syncHistory(records: ThermalData[]) {
    this.send({
      type: 'sync_history',
      timestamp: Date.now(),
      deviceId: this.getDeviceId(),
      data: records
    });
  }
  
  private send(packet: ThermalPacket) {
    if (this.ws?.readyState === WebSocket.OPEN) {
      this.ws.send(JSON.stringify(packet));
    }
  }
}
```

---

## âš ï¸ æŠ€æœ¯é£é™©ä¸è§£å†³æ–¹æ¡ˆ

### é£é™©1: çƒ­æˆåƒæ•°æ®æ ¼å¼å…¼å®¹

**é—®é¢˜**: ä¸åŒçƒ­æˆåƒä»ªå‚å•†æ•°æ®æ ¼å¼ä¸åŒ

**è§£å†³æ–¹æ¡ˆ**:
1. ä¼˜å…ˆæ”¯æŒå›¾ç‰‡æ ¼å¼ï¼ˆé€šç”¨æ€§æœ€å¼ºï¼‰
2. æä¾›è‰²é˜¶èŒƒå›´æ‰‹åŠ¨è®¾ç½®
3. æ”¯æŒCSVæ¸©åº¦çŸ©é˜µå¯¼å…¥
4. åç»­å¯æ·»åŠ ç‰¹å®šæ ¼å¼æ’ä»¶

### é£é™©2: 3Dæ¸²æŸ“æ€§èƒ½

**é—®é¢˜**: é«˜åˆ†è¾¨ç‡çƒ­åŠ›å›¾å¯èƒ½å¯¼è‡´å¡é¡¿

**è§£å†³æ–¹æ¡ˆ**:
1. æ”¯æŒåˆ†è¾¨ç‡é™é‡‡æ ·
2. ä½¿ç”¨LODï¼ˆç»†èŠ‚å±‚æ¬¡ï¼‰æŠ€æœ¯
3. Web Appä½¿ç”¨ç®€åŒ–ç‰ˆ3Dé¢„è§ˆ
4. æ¡Œé¢ç«¯æä¾›å®Œæ•´é«˜ç²¾åº¦æ¸²æŸ“

### é£é™©3: è®¾å¤‡æ¸©åº¦è·å–é™åˆ¶

**é—®é¢˜**: Webæµè§ˆå™¨è·å–è®¾å¤‡æ¸©åº¦æƒé™å—é™

**è§£å†³æ–¹æ¡ˆ**:
1. ä¼˜å…ˆä½¿ç”¨Battery APIï¼ˆéƒ¨åˆ†è®¾å¤‡æ”¯æŒæ¸©åº¦ï¼‰
2. ä¸»è¦ä¾èµ–å¤–éƒ¨çƒ­æˆåƒæ•°æ®å¯¼å…¥
3. æä¾›æ‰‹åŠ¨è¾“å…¥é€‰é¡¹
4. Androidå¯å°è¯•è¯»å–/sysæ¸©åº¦æ–‡ä»¶

### é£é™©4: å¤§æ•°æ®é‡ä¼ è¾“

**é—®é¢˜**: é«˜åˆ†è¾¨ç‡æ¸©åº¦çŸ©é˜µæ•°æ®é‡å¤§

**è§£å†³æ–¹æ¡ˆ**:
1. æ•°æ®å‹ç¼©ï¼ˆå¯å‹ç¼©ä¸ºPNGå†ä¼ è¾“ï¼‰
2. é™é‡‡æ ·ä¼ è¾“åæ¡Œé¢ç«¯æ’å€¼
3. åˆ†å—ä¼ è¾“å¤§æ•°æ®
4. æ”¯æŒä»…ä¼ è¾“å…³é”®å¸§

---

## ğŸ“Š éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- [ ] çƒ­æˆåƒå›¾ç‰‡æˆåŠŸè§£æä¸ºæ¸©åº¦çŸ©é˜µ
- [ ] 2Dçƒ­åŠ›å›¾æ­£ç¡®æ¸²æŸ“
- [ ] 3Dçƒ­åŠ›å›¾å¯äº¤äº’æŸ¥çœ‹
- [ ] çƒ­ç‚¹åŒºåŸŸè‡ªåŠ¨è¯†åˆ«å‡†ç¡®
- [ ] æ•°æ®åŒæ­¥å»¶è¿Ÿ<1s
- [ ] å¤šåœºæ™¯å¯¹æ¯”æ­£ç¡®æ˜¾ç¤º
- [ ] PWAç¦»çº¿åŠŸèƒ½æ­£å¸¸

### æ€§èƒ½éªŒæ”¶

- [ ] Web Appé¦–å±åŠ è½½<3s
- [ ] 3Dé¢„è§ˆå¸§ç‡>30fps
- [ ] æ¡Œé¢ç«¯3Dæ¸²æŸ“å¸§ç‡>60fps
- [ ] æ¡Œé¢ç«¯å†…å­˜<500MB
- [ ] 1000x1000çŸ©é˜µæ¸²æŸ“<2s

### å…¼å®¹æ€§éªŒæ”¶

- [ ] Chrome/Edge/Firefox/Safari
- [ ] iOS Safari / Android Chrome
- [ ] Windows 10/11
- [ ] macOS 10.15+

---

## ğŸ“š å‚è€ƒèµ„æ–™

1. [Three.js Documentation](https://threejs.org/docs/)
2. [React Three Fiber](https://docs.pmnd.rs/react-three-fiber)
3. [WebGL Heatmap](https://github.com/pyalot/webgl-heatmap)
4. [Recharts](https://recharts.org/)
5. [Dexie.js](https://dexie.org/)
6. [FLIR Thermal Data Format](https://www.flir.com/)

---

## ğŸ“ æ›´æ–°æ—¥å¿—

| æ—¥æœŸ       | ç‰ˆæœ¬ | æ›´æ–°å†…å®¹                         |
| ---------- | ---- | -------------------------------- |
| 2025-12-27 | v0.1 | åˆå§‹æ–‡æ¡£åˆ›å»º                     |
| 2025-01-XX | v0.2 | Web Appå’Œæ¡Œé¢ç«¯æ ¸å¿ƒé¡µé¢å¼€å‘å®Œæˆ  |
| 2025-XX-XX | v1.0 | Web Appå’Œæ¡Œé¢ç«¯å¼€å‘å®Œæˆ          |

---

**æ–‡æ¡£ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ  
**æœ€åæ›´æ–°**: 2025å¹´12æœˆ27æ—¥
